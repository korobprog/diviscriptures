# Исправление парсинга санскрита в Бхагавад Гите

## Проблема
Парсер Бхагавад Гиты не извлекал санскритский текст из vedabase.io. При тестировании показывал "Sanskrit: ..." (пустое поле).

## Причина
Сайт vedabase.io использует разные представления:
- **Default view** (`/ru/library/bg/1/`) - содержит только русские переводы
- **Advanced view** (`/ru/library/bg/1/advanced-view`) - содержит санскрит, переводы и комментарии

Парсер использовал default view, где санскрит отсутствует.

## Решение

### 1. Изменение URL
```python
# Было:
url = f"{self.base_url}{chapter_number}/"

# Стало:
url = f"{self.base_url}{chapter_number}/advanced-view"
```

### 2. Обновление селекторов
Добавлены селекторы для advanced view:
```python
verse_selectors = [
    '.av-verses',  # Advanced view verse containers
    '.verse',
    '.shloka',
    '[class*="verse"]',
    '[class*="shloka"]'
]
```

### 3. Новая логика извлечения стихов
- Обнаружение контейнера `.av-verses`
- Поиск отдельных стихов внутри контейнера
- Извлечение санскрита из элементов с классом `av-devanagari`
- Извлечение переводов из элементов с классом `translation`

### 4. Новые методы
- `_find_individual_verses_in_container()` - поиск отдельных стихов
- `_extract_sanskrit_from_advanced_element()` - извлечение санскрита
- `_extract_translation_from_advanced_element()` - извлечение переводов
- `_extract_commentary_from_advanced_element()` - извлечение комментариев

## Результаты

### До исправления:
- Санскрит: пустой
- Стихи: 78 (дублированные)
- Качество: низкое

### После исправления:
- **Глава 1**: 35 стихов с санскритом ✅
- **Глава 2**: 69 стихов с санскритом ✅
- **Глава 3**: 42 стиха с санскритом ✅

### Пример извлеченного санскрита:
```
धृतराष्ट्र उवाचधर्मक्षेत्रे कुरुक्षेत्रे समवेता युयुत्सव: ।मामका: पाण्डवाश्चैव किमकुर्वत सञ्जय ॥ १ ॥
```

## Тестирование
```bash
python test_parser.py
```

Все тесты проходят успешно. Парсер теперь корректно извлекает санскритский текст из всех глав Бхагавад Гиты.

## Файлы изменены
- `bhagavad_gita_parser.py` - основная логика парсера
- Добавлены методы для работы с advanced view
- Обновлены селекторы и URL

## Статус
✅ **ИСПРАВЛЕНО** - Санскрит теперь корректно извлекается из всех стихов Бхагавад Гиты.
