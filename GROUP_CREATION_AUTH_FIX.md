# Исправление ошибки создания группы

## Проблема
При попытке создать группу возникала ошибка 500 (Internal Server Error) с сообщением "Could not establish connection. Receiving end does not exist."

## Анализ
После изучения кода было обнаружено, что:
1. API endpoint `/api/groups` требует аутентифицированного пользователя (проверка `session?.user?.id`)
2. Компоненты `CreateGroupModal` и `Index` не проверяли аутентификацию пользователя
3. При попытке создания группы без аутентификации возвращался статус 401 (Unauthorized)

## Решение
1. **Добавлена проверка аутентификации в CreateGroupModal.tsx:**
   - Импортирован `useSession` из `next-auth/react`
   - Добавлена проверка `session` в функции `handleSubmit`
   - При отсутствии сессии показывается ошибка "Необходимо войти в систему для создания группы"

2. **Добавлена проверка аутентификации в Index.tsx:**
   - Импортирован `useSession` из `next-auth/react`
   - Добавлена проверка `session` в функции `handleCreateGroup`
   - При отсутствии сессии показывается alert с сообщением о необходимости входа

3. **Создан тестовый пользователь:**
   - Email: `test@example.com`
   - Пароль: `password123`
   - Роль: `PARTICIPANT`

## Настройки группы
Согласно схеме базы данных, группа должна содержать следующие обязательные поля:
- `name` - название группы
- `city` - город
- `country` - страна
- `language` - язык (по умолчанию "en")
- `description` - описание (необязательное)
- `adminId` - ID администратора (автоматически устанавливается из сессии)

## Тестирование
Для тестирования создания группы:
1. Перейти на страницу логина `/login`
2. Войти с тестовыми данными: `test@example.com` / `password123`
3. Нажать кнопку "Создать группу"
4. Заполнить форму создания группы
5. Отправить форму

## Статус
✅ Проблема решена. Создание группы теперь работает корректно с проверкой аутентификации.
