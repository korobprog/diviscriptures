# Система одобрения создания групп

## Реализованная функциональность

### 1. Модификация API создания группы
- **Файл**: `app/api/groups/route.ts`
- **Изменения**:
  - API теперь создает запрос на создание группы вместо непосредственного создания
  - Добавлена проверка на существующие запросы в том же городе
  - Информация о группе сохраняется в сообщении запроса

### 2. Обновление API обработки запросов
- **Файл**: `app/api/admin-requests/[id]/route.ts`
- **Изменения**:
  - При одобрении запроса автоматически создается группа
  - Парсинг информации о группе из сообщения запроса
  - Связывание созданной группы с запросом

### 3. Обновление интерфейса создания группы
- **Файл**: `app/components/CreateGroupModal.tsx`
- **Изменения**:
  - Показ сообщения об отправке запроса на рассмотрение
  - Обновленное сообщение об успехе

### 4. Панель супер-администратора
- **Файл**: `app/admin/page.tsx`
- **Функции**:
  - Просмотр всех запросов на создание групп
  - Одобрение/отклонение запросов
  - Автоматическое создание группы при одобрении
  - Статистика по запросам и группам

## Процесс создания группы

### Для пользователя:
1. Пользователь заполняет форму создания группы
2. Отправляется запрос на создание группы
3. Показывается сообщение: "Запрос на создание группы отправлен на рассмотрение супер-администратору"
4. Группа не создается до одобрения

### Для супер-администратора:
1. Вход в панель администрирования (`/admin`)
2. Просмотр запросов в разделе "Запросы на администрирование"
3. Одобрение или отклонение запроса
4. При одобрении:
   - Пользователь получает роль ADMIN
   - Автоматически создается группа
   - Группа связывается с запросом

## Учетные данные для тестирования

### Обычный пользователь:
- **Email**: `test@example.com`
- **Пароль**: `password123`
- **Роль**: `PARTICIPANT`

### Супер-администратор:
- **Email**: `admin@vrinda-sangha.com`
- **Пароль**: `admin123`
- **Роль**: `SUPER_ADMIN`

## Настройки группы

При создании запроса на группу сохраняется следующая информация:
- **Название группы** (обязательно)
- **Город** (обязательно)
- **Страна** (обязательно)
- **Язык** (по умолчанию "ru")
- **Описание** (необязательно)
- **Дополнительное сообщение** (необязательно)

## Статус
✅ Система полностью реализована и готова к тестированию.

## Тестирование
1. Войдите как обычный пользователь (`test@example.com`)
2. Попробуйте создать группу
3. Войдите как супер-администратор (`admin@vrinda-sangha.com`)
4. Перейдите в панель администрирования (`/admin`)
5. Одобрите запрос на создание группы
6. Проверьте, что группа создалась и пользователь стал администратором
